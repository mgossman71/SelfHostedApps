# Theme + global settings
theme:
  presets:
    default:
      background-color: 0 0 12
      primary-color: 210 75 55
      positive-color: 145 60 55
      negative-color: 0 100 63
      contrast-multiplier: 1.05
  use: default
pages:
  - name: Glance
    slug: glance
    head-widgets:
      - type: markets
        hide-header: true
        markets:
          - symbol: NVDA
            name: NVIDIA
          - symbol: AMD
            name: AMD
          - symbol: TGT
            name: Target Corp
          - symbol: BTC-USD
            name: Bitcoin
          - symbol: SPY
            name: S&P 500
    columns:
      - size: small
        widgets:
          - type: weather
            location: Minneapolis, Minnesota, United States
            units: imperial
            hour-format: 12h
          - type: calendar
            # Example public ICS; swap for yours when ready
            calendars:
              - url: https://calendar.google.com/calendar/ical/en.usa%23holiday%40group.v.calendar.google.com/public/basic.ics
            first-day-of-week: sunday
          - type: releases
            cache: 1d
            repositories:
              - glanceapp/glance
              - immich-app/immich
              - anythingllm/anything-llm
              - syncthing/syncthing
      - size: full
        widgets:
          - type: group
            widgets:
              - type: hacker-news
              - type: lobsters
          - type: videos
            channels:
              - UCiaQzXI5528Il6r2NNkrkJA  # Digital Spaceport
              - UCkWQ0gDrqOCarmUKmppD7GQ  # JayzTwoCents
              - UCajiMK_CY9icRhLepS8_3ug  # Alex Ziskind
          - type: group
            widgets:
              - type: reddit
                subreddit: selfhosted
                show-thumbnails: true
              - type: reddit
                subreddit: homelab
                show-thumbnails: true
              - type: rss
                limit: 12
                collapse-after: 4
                cache: 6h
                feeds:
                  - url: https://www.proxmox.com/en/news/atom
                    title: Proxmox News
                  - url: https://noted.lol/rss/
                    title: Noted.lol
                  - url: https://opensource.com/feed
                    title: Opensource.com
      - size: small
        widgets:
          - type: server-stats   # Stats of the host Glance runs on
          - type: to-do
            id: personal
            title: Quick Tasks
          - type: bookmarks
            groups:
              - title: Homelab UIs
                links:
                  - title: Github
                    url: https://github.com/mgossman71?tab=repositories
                  - title: Unifi
                    url: http://10.0.0.3
                  - title: Open-WebUI
                    url:  https://jarvis.gossman.cloud/
                  - title: Proxmox
                    url: http://pve1:8006
                  - title: NPM
                    url: http://10.0.0.215:81/login
                  - title: Immich
                    url: https://imch.gossman.cloud/auth/login 
  - name: Lab Services
    slug: lab-services
    columns:
      - size: full 
        widgets:
          - type: custom-api
            title: Steam Specials
            cache: 12h
            url: https://store.steampowered.com/api/featuredcategories?cc=us
            template: |
              <ul class="list list-gap-10 collapsible-container" data-collapse-after="5">
              {{ range .JSON.Array "specials.items" }}
                <li>
                  <a class="size-h4 color-highlight block text-truncate" href="https://store.steampowered.com/app/{{ .Int "id" }}/">{{ .String "name" }}</a>
                  <ul class="list-horizontal-text">
                    <li>{{ div (.Int "final_price" | toFloat) 100 | printf "$%.2f" }}</li>
                    {{ $discount := .Int "discount_percent" }}
                    <li{{ if ge $discount 40 }} class="color-positive"{{ end }}>{{ $discount }}% off</li>
                  </ul>
                </li>
              {{ end }}
              </ul>     
          - type: custom-api
            title: Steam Deals — Under $10 (60%+)
            cache: 6h
            url: "https://store.steampowered.com/search/results/?json=1&specials=1&category1=998&maxprice=1000&l=en&cc=us&hide_f2p=1&sort_by=Price_ASC"
            template: |
              <ul class="list list-gap-10 collapsible-container" data-collapse-after="8">
              {{ range .JSON.Array "items" }}
                {{ $price := .Map "price" }}
                {{ $initial := $price.Int "initial" }}
                {{ $final := $price.Int "final" }}
                {{ $discount := cond (and $price (gt $initial 0)) (mul (div (sub $initial $final) $initial) 100) 0 }}
                {{ if and (le $final 1000) (ge $discount 60) }}
                <li>
                  <a class="size-h4 color-highlight block text-truncate" href="https://store.steampowered.com/app/{{ .Int "id" }}/">{{ .String "name" }}</a>
                  <ul class="list-horizontal-text">
                    <li>{{ printf "$%.2f" (div (toFloat $final) 100) }}</li>
                    <li class="color-positive">{{ printf "%d%% off" (round $discount) }}</li>
                  </ul>
                </li>
                {{ end }}
              {{ end }}
              </ul>

          - type: custom-api
            title: Steam Daily Deal + Spotlight
            cache: 3h
            url: "https://store.steampowered.com/api/featuredcategories?cc=us&l=en"
            template: |
              {{ $daily := .JSON.Map "specials" }}
              {{ $spot := .JSON.Map "cat_spotlight" }}
              <div class="stack stack-gap-8">
                {{ if $daily }}
                  <div>
                    <div class="size-h4">Daily Deal</div>
                    <ul class="list list-gap-8">
                    {{ range $daily.Array "items" | limit 1 }}
                      <li>
                        <a class="block size-h4 color-highlight" href="https://store.steampowered.com/app/{{ .Int "id" }}/">{{ .String "name" }}</a>
                        <div>{{ printf "$%.2f" (div (toFloat (.Int "final_price")) 100) }} · {{ .Int "discount_percent" }}% off</div>
                      </li>
                    {{ end }}
                    </ul>
                  </div>
                {{ end }}
                {{ if $spot }}
                  <div>
                    <div class="size-h4">Spotlight</div>
                    <a class="block color-highlight" href="{{ $spot.String "url" }}">{{ $spot.String "name" }}</a>
                  </div>
                {{ end }}
              </div>



      - size: small
        widgets:
          - type: monitor
            cache: 1m
            title: Infrastructure
            sites:
              - title: PVE1
                url: https://pve1.gossman.cloud:8006
                allow-insecure: true
                alt-status-codes: [200, 401, 403]
              - title: PVE2
                url: https://pve2.gossman.cloud:8006
                allow-insecure: true
                alt-status-codes: [200, 401, 403]
              - title: PVE3
                url: https://10.0.0.22:8006
                allow-insecure: true
                alt-status-codes: [200, 401, 403]
              - title: Proxmox Backup Server
                url: https://10.0.0.19:8007/
                allow-insecure: true
              - title: TrueNAS
                url: http://truenas.gossman.cloud/
              - title: Synology
                url: http://10.0.0.241:5000/
          - type: monitor  
            cache: 1m
            title: Services
            sites:
              - title: Unifi
                url: https://10.0.0.3
                check-url: https://10.0.0.3/
                allow-insecure: true
              - title: NPM
                url: http://10.0.0.215:81/
              - title: Open-WebUI
                url: https://jarvis.gossman.cloud/
              - title: ChatGPT
                url: https://chat.openai.com/
                alt-status-codes: [403]
              - title: Home Assistant
                url: http://10.0.0.239:8123/
              - title: immich
                url: https://imch.gossman.cloud
              - title: Dashy
                url: http://10.0.0.104:8080/
      - size: small
        widgets:
          - type: monitor
            cache: 1m
            title: Movie-Tools
            sites:
              - title: Overseerr
                url: https://requests.gossman.cloud/
              - title: Radarr
                url: http://radarr.gossman.cloud/
              - title: Sonarr
                url: http://sonarr.gossman.cloud/
              - title: Sabnzbd
                url: http://sabnzbd.gossman.cloud/
  - name: Dashy
    slug: dashy
    columns:
      - size: full
        widgets:
          - type: iframe
            source: http://10.0.0.104:8080/
            height: 900   # adjust to taste
