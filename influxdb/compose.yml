services:
  influxdb:
    image: influxdb:1.8
    container_name: influxdb
    restart: unless-stopped
    ports:
      - "8086:8086"   # InfluxDB HTTP API
    environment:
      # Enable HTTP auth and bootstrap an admin + initial DB
      INFLUXDB_HTTP_AUTH_ENABLED: "true"
      INFLUXDB_DB: "metrics"                 # initial database (optional)
      INFLUXDB_ADMIN_USER: "admin"
      INFLUXDB_ADMIN_PASSWORD: "change-me"   # <-- set your strong admin password
      # (optional regular user you can write with)
      INFLUXDB_USER: "writer"
      INFLUXDB_USER_PASSWORD: "change-me-too"
    volumes:
      - ./influxdb:/var/lib/influxdb

  chronograf:
    image: chronograf:1.10
    container_name: chronograf
    restart: unless-stopped
    ports:
      - "8888:8888"   # Chronograf UI
    environment:
      # Point Chronograf at the InfluxDB service name from this compose
      INFLUXDB_URL: "http://influxdb:8086"
      # If Chronograf prompts for auth to InfluxDB, use the admin creds above
    depends_on:
      - influxdb
    volumes:
      - ./chronograf:/var/lib/chronograf
