version: "3.9"

services:
  influxdb:
    image: influxdb:1.8
    container_name: influxdb
    restart: unless-stopped
    ports:
      - "8086:8086"
    environment:
      INFLUXDB_HTTP_AUTH_ENABLED: "true"
      INFLUXDB_DB: "metrics"
      INFLUXDB_ADMIN_USER: "admin"
      INFLUXDB_ADMIN_PASSWORD: "change-me"      # ← change this
      INFLUXDB_USER: "writer"
      INFLUXDB_USER_PASSWORD: "change-me-too"   # ← change this
    volumes:
      - ./data/influxdb:/var/lib/influxdb

  chronograf:
    image: chronograf:1.10
    container_name: chronograf
    restart: unless-stopped
    ports:
      - "8888:8888"
    environment:
      INFLUXDB_URL: "http://influxdb:8086"
    depends_on:
      - influxdb
    volumes:
      - ./data/chronograf:/var/lib/chronograf
